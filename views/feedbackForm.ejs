<head>
    <style>
        .btn, .btn-outline-secondary {
                margin-left: 35% ;margin-top: 3%; width : 30%; height: 40px; font-size: 100%; margin-bottom : 2%
        }
        .btn-outline-secondary:hover {
            background-color: lightgrey
        }
        .form-group {
            width:100%; margin-left: 0%;
        }
        .alert.info {background-color: #2196F3;width:30%}
        .closebtn {
            color: white;
            font-weight: bold;
            float: right;
            font-size: 22px;
            line-height: 20px;
            cursor: pointer;
            transition: 0.3s;
        } 
    </style>
</head>

<body>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <hr>
    <h2 style = "text-align: center; text-decoration: underline;">Submit a ticket</h2>
    <div class = "container">
        <div class="row">
            <div class="col">
                
                <form action = "/submitfeedback" method ="POST" enctype = "multipart/form-data">
                    <input type = "text" class = "form-control form-control-lg" name = "subject" placeholder="Subject" style = "margin-top: 2%" required>
                    <textarea  class="form-control" name = "message"  placeholder = "Details of your issue..." style = "margin-top: 2%;"  required></textarea>
                    <div class="form-group">
                        <label for="exampleSelect1"></label>
                        <select class="form-control" id="exampleSelect1" name = "category" style = "margin-top: 2%" required>
                          <option>Bug / Error</option>
                          <option>Feature/Recommendation</option>
                          <option>Other</option>
                        </select>
                    </div>
                    <div class = "form-group form-inline">
                        <input type = "file" class = "form-control" id = "images" name = "images" value = "images" style = "margin-top:2%;width:400px; height: 30%" alt ="" multiple>
                        <label for="image" style = "margin-top:2%; margin-left: 1%">We highly recommend you submit a picture(or pictures) of your issue, but it's not required</label>
                      </div>
                      <!-- <label for="image" style = "margin-top:2%">Add a cover photo for your club's profile!</label> -->
                    <button  type="submit" class="btn btn-outline-secondary" style = "margin-top: 1%;">Submit</button>
                </form>

            </div>
        </div>
    </div>
    <div class="container" style = "margin-top: 3%;">
        <div class="row">
            <div class="col">
                <h2 style = "text-align: center; text-decoration: underline;">Current Tickets</h2>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <% tickets.forEach(ticket => { %>
                    <div class="card" style="width: 18rem;margin-left: 1%; float:left">
                        <div class="card-body">
                            <h5 class="card-title"><%=ticket.subject%></h5>
                            <h6 class="card-subtitle mb-2 text-muted"><%=ticket.type%></h6>
                            <h7 class="card-subtitle mb-2 text-muted"><%=ticket.status%></h7>
                            <% if(ticket.image.length > 0) {%>
                                <% ticket.image.forEach(image => { %>
                                    <a href = "/image/<%=image%>" target="_blank"><%= image %> </a>
                                <% }) %> 
                            <% } %>  
                            <p class="card-text" style = "margin-top:1%"><%=ticket.feedback%></p>
                        </div>
                    </div>
                <% }) %>
            </div>
        </div>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
</body>